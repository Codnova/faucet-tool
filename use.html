
<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8">
<script type='text/javascript' src='./bmonic.bundle.js'></script>
</head>
<body>
<h3>Create a New Key</h3>

<form id='keyForm'>
  <input id='keyPass' type='text' placeholder='passphrase'/>

  <div id='errorText'></div>
  <input type='submit' value = 'Generate Key'/>
</form>
<div id='phraseBox'></div>
<div id='pubKeyBox'></div>
<div id='privKeyBox'></div>

<h3>Extract Raw from Phrase and Password</h3>

<form id='checkForm'>
  <input id='mPhrase' type='text' placeholder='mnemonic phrase'/>
  <input type='submit' value = 'Check Address'/>
</form>
<div id='decodedKeyBox'></div>


</body>


<script type='text/javascript'>
// IMPORTANT: Do not change
// Changes here will cause associate decryption script to fail


document.addEventListener("DOMContentLoaded", (e) => {

  let keyForm = document.getElementById('keyForm')
  let keyPass = document.getElementById('keyPass')
  let pubKeyBox = document.getElementById('pubKeyBox')
  let privKeyBox = document.getElementById('privKeyBox')
  let phraseBox = document.getElementById('phraseBox')
  let errorText = document.getElementById('errorText')

  keyForm.addEventListener('submit', (e) => {
    e.preventDefault()
    let bmonic = new bMonic({lang: 'english'})
    try {
      const key = bmonic.newKey()

      window.keyz = key
    
      pubKeyBox.innerHTML = "ADDRESS: " + key.address
      phraseBox.innerHTML = key.phrase

    } catch (err) {
      console.log(err)
      errorText.innerHTML = err.message
    }
  })

  let checkForm = document.getElementById('checkForm')
  let mPhrase = document.getElementById('mPhrase')
  let decodedKeyBox = document.getElementById('decodedKeyBox')

  checkForm.addEventListener('submit', (e) => {
    e.preventDefault()
    let bmonic = new bMonic()
    const phrase = mPhrase.value
    console.log(phrase)

    try {
      const check = bmonic.checkAddr(phrase)
      decodedKeyBox.innerHTML = "CHECKED " +check
    } catch (err) {
      console.log(err)
      errorText.innerHTML = err.message
    }
  })
})

</script>


</html>

